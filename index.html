<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Flowi ¬∑ Finanzas Personales</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      --bg1: #eef2ff;
      --bg2: #e0fbea;
      --accent: #22c55e;
      --accent-soft: rgba(34, 197, 94, 0.15);
      --danger: #ef4444;
      --text-main: #020617;
      --text-muted: #6b7280;
      --card-bg: rgba(255, 255, 255, 0.8);
      --radius-lg: 18px;
      --shadow-soft: 0 18px 40px rgba(15, 23, 42, 0.15);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top left, var(--bg1), var(--bg2));
      color: var(--text-main);
      display: flex;
      justify-content: center;
    }

    .app {
      width: 100%;
      max-width: 480px;
      min-height: 100vh;
      padding: 12px 12px 72px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    /* Header */
    .app-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 4px 4px 0;
    }

    .app-title {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .app-title span.small {
      font-size: 12px;
      color: var(--text-muted);
    }

    .app-title h1 {
      font-size: 22px;
      font-weight: 700;
    }

    .chip-month {
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.7);
      box-shadow: 0 8px 20px rgba(15, 23, 42, 0.08);
      font-size: 12px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .chip-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--accent);
    }

    /* Card circular resumen */
    .card-ring {
      margin-top: 4px;
      background: var(--card-bg);
      border-radius: 24px;
      padding: 14px 14px 12px;
      box-shadow: var(--shadow-soft);
      position: relative;
      overflow: hidden;
    }

    .ring-layout {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .ring {
      width: 92px;
      height: 92px;
      border-radius: 999px;
      background: conic-gradient(
        from -90deg,
        var(--accent) 0%,
        var(--accent) 46%,
        rgba(148, 163, 184, 0.5) 46%,
        rgba(148, 163, 184, 0.5) 100%
      );
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .ring-inner {
      width: 64px;
      height: 64px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.9);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 2px;
      font-size: 11px;
    }

    .ring-inner strong {
      font-size: 16px;
    }

    .ring-badge {
      position: absolute;
      bottom: 4px;
      right: -2px;
      background: var(--accent-soft);
      color: #15803d;
      font-size: 10px;
      padding: 4px 8px;
      border-radius: 999px;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .ring-badge span {
      font-size: 13px;
    }

    .ring-text {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .ring-text .label {
      font-size: 11px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }

    .ring-text .balance {
      font-size: 20px;
      font-weight: 700;
    }

    .ring-text .sub {
      font-size: 12px;
      color: var(--text-muted);
    }

    .ring-progress {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 8px;
      font-size: 11px;
      color: var(--text-muted);
    }

    .ring-progress-bar {
      position: relative;
      margin-top: 6px;
      height: 7px;
      border-radius: 999px;
      background: rgba(148, 163, 184, 0.25);
      overflow: hidden;
    }

    .ring-progress-fill {
      position: absolute;
      inset: 0;
      width: 46%;
      background: linear-gradient(90deg, #22c55e, #4ade80);
    }

    /* Bot√≥n flotante */
    .fab {
      position: fixed;
      bottom: 82px;
      left: 50%;
      transform: translateX(-50%);
      width: 64px;
      height: 64px;
      border-radius: 999px;
      background: radial-gradient(circle at top left, #4ade80, #22c55e);
      box-shadow: 0 18px 40px rgba(22, 163, 74, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 30px;
      border: none;
      cursor: pointer;
    }

    /* Tabs top */
    .tabs {
      display: flex;
      gap: 6px;
      background: rgba(255, 255, 255, 0.7);
      border-radius: 999px;
      padding: 4px;
      margin-top: 4px;
    }

    .tab-pill {
      flex: 1;
      border-radius: 999px;
      border: none;
      background: transparent;
      padding: 6px 0;
      font-size: 12px;
      color: var(--text-muted);
      font-weight: 500;
    }

    .tab-pill.active {
      background: #0f172a;
      color: white;
    }

    /* Contenido scrollable */
    .content {
      flex: 1;
      margin-top: 6px;
      overflow-y: auto;
      padding-bottom: 12px;
    }

    .section-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 4px;
      margin-top: 6px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      color: #0f172a;
    }

    .section-sub {
      font-size: 11px;
      color: var(--text-muted);
    }

    /* Flow: timeline de d√≠as */
    .day-card {
      background: var(--card-bg);
      border-radius: var(--radius-lg);
      padding: 8px 10px;
      box-shadow: 0 10px 26px rgba(15, 23, 42, 0.12);
      margin-bottom: 8px;
    }

    .day-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 4px;
      font-size: 11px;
      color: var(--text-muted);
    }

    .day-header strong {
      font-size: 12px;
      color: #0f172a;
    }

    .chips-row {
      display: flex;
      gap: 4px;
      flex-wrap: wrap;
      margin-bottom: 4px;
    }

    .chip-mini {
      padding: 3px 8px;
      border-radius: 999px;
      font-size: 10px;
      background: rgba(148, 163, 184, 0.15);
      color: #0f172a;
    }

    .chip-mini.income {
      background: rgba(34, 197, 94, 0.18);
      color: #166534;
    }

    .chip-mini.expense {
      background: rgba(239, 68, 68, 0.14);
      color: #991b1b;
    }

    .day-footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 12px;
      margin-top: 2px;
    }

    .day-footer span.balance {
      font-weight: 600;
    }

    /* Burbujas */
    .bubbles-wrap {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 4px;
    }

    .bubble {
      width: 84px;
      height: 84px;
      border-radius: 999px;
      background: radial-gradient(circle at top, rgba(255, 255, 255, 0.95), rgba(148, 163, 184, 0.15));
      box-shadow: 0 12px 30px rgba(15, 23, 42, 0.18);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 2px;
      font-size: 11px;
      position: relative;
    }

    .bubble strong {
      font-size: 12px;
    }

    .bubble-amount {
      font-weight: 700;
      font-size: 13px;
    }

    .bubble-tag {
      position: absolute;
      top: 6px;
      right: 6px;
      font-size: 9px;
      padding: 2px 6px;
      border-radius: 999px;
      background: var(--accent-soft);
      color: #15803d;
    }

    /* Metas */
    .goal-card {
      background: var(--card-bg);
      border-radius: var(--radius-lg);
      padding: 10px 10px 8px;
      box-shadow: 0 10px 26px rgba(15, 23, 42, 0.12);
      margin-bottom: 8px;
      font-size: 12px;
    }

    .goal-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 4px;
    }

    .goal-name {
      font-weight: 600;
    }

    .goal-tag {
      font-size: 10px;
      padding: 3px 8px;
      border-radius: 999px;
      background: #0f172a;
      color: white;
    }

    .goal-progress {
      margin-top: 6px;
    }

    .goal-bar {
      margin-top: 4px;
      height: 7px;
      border-radius: 999px;
      background: rgba(148, 163, 184, 0.25);
      overflow: hidden;
    }

    .goal-fill {
      height: 100%;
      background: linear-gradient(90deg, #22c55e, #4ade80);
      width: 62%;
    }

    /* Bottom nav */
    .bottom-nav {
      position: fixed;
      bottom: 8px;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      max-width: 480px;
      padding: 6px 12px;
      z-index: 10;
    }

    .bottom-nav-inner {
      background: rgba(15, 23, 42, 0.96);
      border-radius: 999px;
      padding: 6px 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: rgba(148, 163, 184, 0.95);
      font-size: 11px;
    }

    .nav-item {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2px;
      cursor: pointer;
      padding: 4px 0;
      border-radius: 999px;
    }

    .nav-item.active {
      color: white;
      background: rgba(148, 163, 184, 0.22);
    }

    .nav-icon {
      font-size: 18px;
      line-height: 1;
    }

    /* Simple modal */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.35);
      display: none;
      align-items: flex-end;
      justify-content: center;
      z-index: 20;
    }

    .modal {
      width: 100%;
      max-width: 480px;
      background: #f9fafb;
      border-radius: 18px 18px 0 0;
      padding: 12px 14px 18px;
      box-shadow: 0 -10px 30px rgba(15, 23, 42, 0.35);
      animation: slideUp 200ms ease-out;
    }

    @keyframes slideUp {
      from { transform: translateY(40px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .modal-header h2 {
      font-size: 15px;
    }

    .modal-close {
      border: none;
      background: transparent;
      font-size: 18px;
      cursor: pointer;
      color: var(--text-muted);
    }

    .modal-form {
      display: flex;
      flex-direction: column;
      gap: 8px;
      font-size: 12px;
    }

    .field-label {
      font-size: 11px;
      color: var(--text-muted);
    }

    .field-input,
    .field-select {
      width: 100%;
      padding: 8px 9px;
      border-radius: 10px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: white;
      font-size: 13px;
    }

    .field-row {
      display: flex;
      gap: 8px;
    }

    .btn-primary {
      margin-top: 4px;
      width: 100%;
      border-radius: 999px;
      padding: 9px 0;
      border: none;
      background: linear-gradient(90deg, #22c55e, #16a34a);
      color: white;
      font-weight: 600;
      font-size: 13px;
      cursor: pointer;
    }

    .badge-type {
      font-size: 10px;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(148, 163, 184, 0.18);
      cursor: pointer;
    }

    .badge-type.active-income {
      background: rgba(34, 197, 94, 0.17);
      color: #166534;
    }

    .badge-type.active-expense {
      background: rgba(239, 68, 68, 0.17);
      color: #991b1b;
    }

    @media (min-width: 768px) {
      .app {
        margin-top: 10px;
        margin-bottom: 10px;
        border-radius: 24px;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <header class="app-header">
      <div class="app-title">
        <span class="small">Buen d√≠a, Vallozzi üëã</span>
        <h1>Tu Flow de hoy</h1>
      </div>
      <div class="chip-month">
        <div class="chip-dot"></div>
        <span id="monthLabel">Noviembre 2025</span>
      </div>
    </header>

    <section class="card-ring">
      <div class="ring-layout">
        <div class="ring">
          <div class="ring-inner">
            <span style="color: var(--text-muted);">Balance</span>
            <strong id="balanceLabel">$ 152.300</strong>
            <span style="color: #16a34a;">+ $ 12.400</span>
          </div>
          <div class="ring-badge">
            <span>‚¨Ü</span>
            <span>47% del presupuesto</span>
          </div>
        </div>
        <div class="ring-text">
          <span class="label">Resumen del mes</span>
          <div class="sub">
            <div><strong>Ingresos:</strong> $ 240.000</div>
            <div><strong>Gastos:</strong> $ 87.700</div>
          </div>
          <div class="ring-progress">
            <span>Presupuesto usado</span>
            <span id="budgetPercent">46%</span>
          </div>
          <div class="ring-progress-bar">
            <div class="ring-progress-fill"></div>
          </div>
        </div>
      </div>
    </section>

    <section class="tabs">
      <button class="tab-pill active" data-tab="flow">Flow</button>
      <button class="tab-pill" data-tab="bubbles">Burbujas</button>
      <button class="tab-pill" data-tab="goals">Metas</button>
    </section>

    <main class="content">
      <!-- FLOW -->
      <section id="tab-flow">
        <div class="section-title">
          <span>√öltimos d√≠as</span>
          <span class="section-sub">Vista r√°pida de tu cashflow</span>
        </div>

        <div id="daysContainer">
          <!-- Se rellena por JS -->
        </div>
      </section>

      <!-- BURBUJAS -->
      <section id="tab-bubbles" style="display: none;">
        <div class="section-title">
          <span>Tus categor√≠as</span>
          <span class="section-sub">Burbujas seg√∫n cu√°nto gast√°s</span>
        </div>
        <div class="bubbles-wrap" id="bubblesContainer">
          <!-- Se rellena por JS -->
        </div>
      </section>

      <!-- METAS -->
      <section id="tab-goals" style="display: none;">
        <div class="section-title">
          <span>Metas activas</span>
          <span class="section-sub">Lo que tu yo del futuro te va a agradecer</span>
        </div>

        <div id="goalsContainer">
          <!-- Se rellena por JS -->
        </div>
      </section>
    </main>
  </div>

  <!-- Bot√≥n flotante -->
  <button class="fab" id="fabBtn">+</button>

  <!-- Bottom nav -->
  <nav class="bottom-nav">
    <div class="bottom-nav-inner">
      <div class="nav-item active" data-tab="flow">
        <div class="nav-icon">üåÄ</div>
        <span>Flow</span>
      </div>
      <div class="nav-item" data-tab="bubbles">
        <div class="nav-icon">ü´ß</div>
        <span>Burbujas</span>
      </div>
      <div class="nav-item" data-tab="goals">
        <div class="nav-icon">‚≠ê</div>
        <span>Metas</span>
      </div>
    </div>
  </nav>

  <!-- Modal alta r√°pida -->
  <div class="modal-backdrop" id="modalBackdrop">
    <div class="modal">
      <div class="modal-header">
        <h2>Nuevo movimiento</h2>
        <button class="modal-close" id="modalClose">&times;</button>
      </div>
      <form class="modal-form" id="txForm">
        <div class="field-row">
          <div style="flex: 1;">
            <div class="field-label">Monto</div>
            <input type="number" step="0.01" class="field-input" id="amountInput" placeholder="Ej: 4500" required>
          </div>
          <div>
            <div class="field-label">Tipo</div>
            <div style="display:flex; gap:4px; margin-top:4px;">
              <div id="typeIncome" class="badge-type active-income" data-type="income">Ingreso</div>
              <div id="typeExpense" class="badge-type" data-type="expense">Gasto</div>
            </div>
          </div>
        </div>

        <div>
          <div class="field-label">Categor√≠a</div>
          <select class="field-select" id="categorySelect">
            <option value="Comida">Comida</option>
            <option value="Transporte">Transporte</option>
            <option value="Hogar">Hogar</option>
            <option value="Ocio">Ocio</option>
            <option value="Otros">Otros</option>
          </select>
        </div>

        <div class="field-row">
          <div style="flex: 1;">
            <div class="field-label">Fecha</div>
            <input type="date" class="field-input" id="dateInput">
          </div>
          <div style="flex: 1;">
            <div class="field-label">Nota</div>
            <input type="text" class="field-input" id="noteInput" placeholder="Ej: Cena con amigos">
          </div>
        </div>

        <button type="submit" class="btn-primary">Guardar en tu Flow</button>
      </form>
    </div>
  </div>

  <script>
    // Datos fake iniciales (despu√©s se reemplazan por LocalStorage)
    const sampleDays = [
      {
        date: "Hoy",
        weekday: "Lunes",
        income: 0,
        expense: 6800,
        balance: 152300,
        tags: ["Comida", "Apps", "Delivery"]
      },
      {
        date: "Ayer",
        weekday: "Domingo",
        income: 22000,
        expense: 9500,
        balance: 159100,
        tags: ["Sueldo", "Combustible"]
      },
      {
        date: "Hace 2 d√≠as",
        weekday: "S√°bado",
        income: 0,
        expense: 12400,
        balance: 146600,
        tags: ["Salida", "Ocio"]
      }
    ];

    const sampleBubbles = [
      { name: "Comida", amount: 32800, tag: "üî• alta" },
      { name: "Transporte", amount: 11200, tag: "ok" },
      { name: "Hogar", amount: 25400, tag: "estable" },
      { name: "Ocio", amount: 18500, tag: "controlar" },
      { name: "Otros", amount: 5200, tag: "-" }
    ];

    const sampleGoals = [
      { name: "Colch√≥n de emergencias", saved: 62000, target: 100000 },
      { name: "Viaje finde largo", saved: 18000, target: 40000 }
    ];

    function formatCurrency(value) {
      return "$ " + value.toLocaleString("es-AR");
    }

    function renderDays() {
      const container = document.getElementById("daysContainer");
      container.innerHTML = "";
      sampleDays.forEach(day => {
        const card = document.createElement("article");
        card.className = "day-card";
        card.innerHTML = `
          <div class="day-header">
            <div>
              <strong>${day.date}</strong> ¬∑ <span>${day.weekday}</span>
            </div>
            <div>${day.expense > day.income ? "üí∏" : "üíö"}</div>
          </div>
          <div class="chips-row">
            <div class="chip-mini income">+ ${formatCurrency(day.income)}</div>
            <div class="chip-mini expense">- ${formatCurrency(day.expense)}</div>
            ${day.tags.map(t => `<div class="chip-mini">${t}</div>`).join("")}
          </div>
          <div class="day-footer">
            <span class="balance">${formatCurrency(day.balance)}</span>
            <span class="section-sub">${day.expense > day.income ? "D√≠a gastador" : "D√≠a ganador"}</span>
          </div>
        `;
        container.appendChild(card);
      });
    }

    function renderBubbles() {
      const container = document.getElementById("bubblesContainer");
      container.innerHTML = "";
      sampleBubbles.forEach(b => {
        const div = document.createElement("div");
        div.className = "bubble";
        div.innerHTML = `
          <div class="bubble-tag">${b.tag}</div>
          <strong>${b.name}</strong>
          <div class="bubble-amount">${formatCurrency(b.amount)}</div>
          <span class="section-sub">este mes</span>
        `;
        container.appendChild(div);
      });
    }

    function renderGoals() {
      const container = document.getElementById("goalsContainer");
      container.innerHTML = "";
      sampleGoals.forEach(g => {
        const pct = Math.round((g.saved / g.target) * 100);
        const card = document.createElement("article");
        card.className = "goal-card";
        card.innerHTML = `
          <div class="goal-header">
            <div>
              <div class="goal-name">${g.name}</div>
              <div class="section-sub">Objetivo: ${formatCurrency(g.target)}</div>
            </div>
            <div class="goal-tag">${pct}%</div>
          </div>
          <div class="goal-progress">
            <div>${formatCurrency(g.saved)} guardado</div>
            <div class="goal-bar">
              <div class="goal-fill" style="width:${Math.min(pct,100)}%"></div>
            </div>
          </div>
        `;
        container.appendChild(card);
      });
    }

    function setupTabs() {
      const tabButtons = document.querySelectorAll(".tab-pill");
      const navItems = document.querySelectorAll(".nav-item");
      const sections = {
        flow: document.getElementById("tab-flow"),
        bubbles: document.getElementById("tab-bubbles"),
        goals: document.getElementById("tab-goals"),
      };

      function activate(tab) {
        // top pills
        tabButtons.forEach(btn => {
          btn.classList.toggle("active", btn.dataset.tab === tab);
        });
        // bottom nav
        navItems.forEach(item => {
          item.classList.toggle("active", item.dataset.tab === tab);
        });
        // sections
        Object.keys(sections).forEach(key => {
          sections[key].style.display = key === tab ? "block" : "none";
        });
      }

      tabButtons.forEach(btn => {
        btn.addEventListener("click", () => activate(btn.dataset.tab));
      });
      navItems.forEach(item => {
        item.addEventListener("click", () => activate(item.dataset.tab));
      });
    }

    function setupModal() {
      const fab = document.getElementById("fabBtn");
      const backdrop = document.getElementById("modalBackdrop");
      const close = document.getElementById("modalClose");
      const form = document.getElementById("txForm");
      const typeIncome = document.getElementById("typeIncome");
      const typeExpense = document.getElementById("typeExpense");

      let currentType = "income";

      function openModal() {
        backdrop.style.display = "flex";
      }

      function closeModal() {
        backdrop.style.display = "none";
        form.reset();
        currentType = "income";
        typeIncome.classList.add("active-income");
        typeExpense.classList.remove("active-expense");
      }

      fab.addEventListener("click", openModal);
      close.addEventListener("click", closeModal);
      backdrop.addEventListener("click", (e) => {
        if (e.target === backdrop) closeModal();
      });

      typeIncome.addEventListener("click", () => {
        currentType = "income";
        typeIncome.classList.add("active-income");
        typeExpense.classList.remove("active-expense");
      });

      typeExpense.addEventListener("click", () => {
        currentType = "expense";
        typeExpense.classList.add("active-expense");
        typeIncome.classList.remove("active-income");
      });

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        const amount = parseFloat(document.getElementById("amountInput").value || "0");
        const category = document.getElementById("categorySelect").value;
        const date = document.getElementById("dateInput").value;
        const note = document.getElementById("noteInput").value;

        // Por ahora, s√≥lo mostramos en consola.
        console.log("Nuevo movimiento:", {
          amount,
          type: currentType,
          category,
          date,
          note
        });

        alert("Simulamos guardar el movimiento en tu Flow üòâ\nDespu√©s esto lo enganchamos a LocalStorage o backend.");

        closeModal();
      });
    }

    function init() {
      renderDays();
      renderBubbles();
      renderGoals();
      setupTabs();
      setupModal();
    }

    document.addEventListener("DOMContentLoaded", init);
  </script>
</body>
</html>
